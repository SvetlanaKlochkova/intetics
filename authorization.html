<!DOCTYPE html>
<html>

<head>
    <title>Authorization</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="resources/js/jquery-3.1.1.min.js"></script>
</head>
<style>
    .brd {
        border: 1px groove gray;
        padding: 5px;
        margin: auto;
        width: 250px;
        text-align: center;
    }

    .btn {
        width: 170px;
    }

    .text {
        margin: auto;
        text-align: center;
        font-size: 11pt;
    }
</style>

<body style="background:whitesmoke;">
    <form onsubmit="return false;">
        <div class="brd">
            <h3>SIGN IN</h3>
            <input id="email" type="email" placeholder="Email Address" autofocus required>
            <p><input id="password" type="password" placeholder="Password" required></p>
            <p><button class="btn" onclick="entrance(); return false;">Login</button></p>
        </div>
        <div class="text">
            Don't have an account? <a href="registration.html">Signup</a>
        </div>
    </form>
</body>
<script>
    function entrance() {
        var email = document.getElementById("email").value;
        var password = document.getElementById("password").value;
        console.log(email);
        console.log(password);
        var user = {
            email: email,
            password: password
        }
        $.ajax({
            method: "POST",
            url: "/checkuser",
            headers: {
                "Content-Type": "application/json"
            },
            processData: false,
            data: JSON.stringify(user),
            success: function (flag) {
                if (flag.success === true) {
                    document.cookie = 'idUser=' + flag.id;
                    document.cookie = 'nameUser=' + flag.username;
                    console.log(document.cookie);
                    location.href = "/images.html";
                }
                else {
                    alert("Не верный логин или пароль!");
                }
            }
        });
    }

</script>

</html>